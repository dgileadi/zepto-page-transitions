$(document).ready(function(){$(document.body).transition("init").show()});
(function(b){var p=0,t=!1;window.location.href.slice(0,window.location.href.lastIndexOf("/")+1);var l=null,q={},u=window.location.href,e=null,v={},r=[],s={options:function(a){l=b.extend({defaultPageTransition:"fade",domCache:!1},a)},init:function(a,d,f){t||(t=!0,b(document.body).transition("options",{}),b(window).on("hashchange",function(){var a=e&&e.element||b(document.body);if(!v[window.location.hash]){var d=window.location.hash;e&&(e.element&&e.element.is("form"))&&(d={type:e.element.attr("method")||
"get",url:window.location.hash.slice(1),data:e.element.serialize(),dataType:"html",global:!1});var c=null,f=null==e;if(f)c=r.length?r.pop().transition:l.defaultPageTransition;else if(e.transition)c=e.transition,r.push({href:window.location.pathname,transition:c}),f=e.reverse;else if(c=e.element.attr("transition")||e.element.data("transition")||l.defaultPageTransition,r.push({href:window.location.pathname,transition:c}),"reverse"===(e.element.attr("direction")||e.element.data("direction")))f=!0;a.transition("changePage",
d,c,f)}e=null}));var c=b('div[data-role="page"]',this);c.length||(this.is("div")?(this.attr("data-role","page"),this.attr("id","_trans_div"+p),c=this):(c=b('<div data-role="page" id="_trans_div'+p+'" />'),this.children().wrapAll(c)));a&&c.trigger("pageload",a);a=c.first();if(window.location.hash&&(a=b(window.location.hash),!a.length)){a=c.first();var h=a.attr("id"),g;g=(q[window.location.hash]||window.location.hash.slice(1)).replace(/[:\.\+\/]/g,"_");a.attr("id",g);h&&(b('[data-href="#'+h+'"]',c).attr("data-href",
"#"+g),b('[href="#'+h+'"]',c).attr("href","#"+g))}c.addClass("ui-page");c.each(function(){b(this).attr("id")||b(this).attr("id","_trans_div"+p);q["#"+b(this).attr("id")]=u;b(this).css("zIndex",p++)});b("a[href]",c).not("[target]").not('[rel="external"]').not('[data-ajax="false"]').not("[data-href]").transition("hijackLinks");b("[data-href]",c).transition("hijackLinks");b("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks");f||(f=document.title);c.not("[data-title]").data("title",
f);if(f=a.data("title"))document.title=f;c.hide();d=(d=d?b(d):null)||a;d.addClass("ui-page-active");c.each(function(){b(this).trigger("pageinit",b(this))});return d},to:function(a,b,f){b=b||l.defaultPageTransition;f||(f=!1);e={transition:b,reverse:f};window.location.hash="#"+a},hijackLinks:function(){return this.each(function(){var a=b(this);if("back"==a.data("rel")){var d=function(a){window.history.back();a.preventDefault()};a.on("click",d);a.on("tap",d)}else{var f=a.attr("data-href")||a.attr("href")||
a.attr("action")||"#";if("#"===f.charAt(0)){if(b('a[name="'+f.slice(1)+'"]').length){v[f]=!0;return}}else f="#"+f,a.is("a")?a.attr("href",f):a.attr("action")&&a.attr("action",f),a.attr("data-href")&&a.attr("data-href",f);a.is("a")?d=function(){e={element:a}}:a.is("form")?(d=function(b){e={element:a};window.location.href=f;b.preventDefault()},a.on("submit",d)):d=function(){e={element:a};window.location.href=f};a.is("form")||(a.on("click",d),a.on("tap",d))}})},changePage:function(a,d,f){var c={toPage:a,
back:f},h=b.Event("pagebeforechange");b(this).trigger(h,c);if(!h.defaultPrevented){a=c.toPage;f=c.back;var h="string"===typeof a?a:a.url,g=null,e=b("div.ui-page-active"),m=!1;if("string"===typeof a&&"#"===a.charAt(0)){var k=b(a.replace(/[:\.\+\/]/g,"_"));k.length?(b(this).transition("perform",e,k,d,f,c),m=!0):!l.domCache&&q[a]?(g=a,a=q[a]):a=a.slice(1)}if(!m){var j={href:h,element:b(this),back:f},h=b.Event("pagebeforeload");b(this).trigger(h,j);var n=b(this);h.defaultPrevented||(b(this).transition("load",
a,j,function(a,h,k){h=b("<div />");h.html(a);b(document.body).append(h);a=b(h).transition("init",j,g,k);b(n).transition("perform",e,a,d,f,c)}),m=!0)}m||b(this).trigger("pagechangefailed",c)}},load:function(a,d,f){a="string"===typeof a?{url:a,dataType:"html",global:!1}:a;a.url||(a.url=window.location.href);a.success=function(c,h,g){d.xhr=g;d.textStatus=h;u=a.url;l.domCache||b('div[data-role="page"]').not('[data-dom-cache="true"]').addClass("transition-recyclable");g=c.search(/<body/i);var e=c;h=c;
var m;-1!=g&&(e=c.slice(0,g),g=c.indexOf(">",g),bodyEnd=c.search(/<\/body>/i),h=c.slice(g+1,bodyEnd));(g=e.match(/<title>(.+)<\/title>/im))&&(m=g[1]);if(window.location.hash){g=window.location.pathname;var k=window.location.hash.slice(1),e="",j=k.lastIndexOf("/");if(-1!=j&&(e=k.slice(0,j+1),"/"==e.charAt(0))){"/"==!g.charAt(0)&&(g="/"+g);j=k=1;do j=e.indexOf("/",j)+1,j>k&&e.slice(0,j)==g.slice(0,j)&&(k=j);while(0<j&&j==k);var n="",j=k;do j=g.indexOf("/",j+1),-1!=j&&(n+="../");while(-1!=j);e=n+e.slice(k)}g=
e;g.length&&(h=h.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+g+'$3"'),h=h.replace(/(\b(src|href|action))="(.+\/)?[^\/]+\/\.\.\//gi,'$1="$3'))}f(h,c,m)};a.error=function(c,f,e){d.xhr=c;d.textStatus=f;d.errorThrown=e;b(this).trigger("pageloadfailed",d);b(this).trigger("pagechangefailed",{toPage:a.url})};b.ajax(a)},perform:function(a,d,f,c,e){e.from=a;e.to=d;a.trigger("pagebeforehide",a);d.trigger("pagebeforeshow",d);window.setTimeout(function(){a.addClass(f+" out");a.removeClass("ui-page-active");
d.show();d.addClass(f+" in");d.addClass("ui-page-active");c&&(a.addClass("reverse"),d.addClass("reverse"))},1);window.setTimeout(function(){a.removeClass(f+" out");d.removeClass(f+" in");a.removeClass("reverse");d.removeClass("reverse");var c=d.data("title");c&&(document.title=c);a.trigger("pagehide",a);d.trigger("pageshow",d);b(document).trigger("pagechange",e);b('div[data-role="page"]').hide();d.show();l.domCache||(b("div.transition-recyclable").each(function(){var a=b.Event("pageremove");b(this).trigger(a,
b(this));a.defaultPrevented||b(this).remove()}),b("div").not("[id]").not(function(){return b(this).children().length}).remove())},707)}};b.fn.transition=function(a){if(s[a])return s[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return s.to.apply(this,arguments);throw"Method "+a+" does not exist";}})(Zepto);